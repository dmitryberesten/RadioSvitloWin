#!/bin/bash
# =====================================
# Bash скрипт для збірки EXE файлу
# =====================================

echo "========================================"
echo " Збірка Радіо Світло - EXE"
echo "========================================"
echo ""

# Перевірка віртуального середовища
if [ -z "$VIRTUAL_ENV" ]; then
    echo "Активуємо віртуальне середовище..."
    source .venv/Scripts/activate
fi

# Встановлення залежностей
echo "Перевірка залежностей..."
pip install -r requirements.txt
echo ""

# Очистка попередніх збірок
echo "Очищення попередніх збірок..."
rm -rf build dist
echo ""

# Збірка EXE
echo "========================================"
echo "Збірка EXE файлу з PyInstaller..."
echo "========================================"
pyinstaller --clean radio_svitlo.spec

# Перевірка результату
if [ -f "dist/RadioSvitlo.exe" ]; then
    echo ""
    echo "========================================"
    echo "✓ Збірка успішна!"
    echo "========================================"
    echo "EXE файл: dist/RadioSvitlo.exe"
    echo ""
    ls -lh dist/RadioSvitlo.exe
    echo ""
    echo "Тепер запустіть ./build_installer.sh"
    echo "для створення установщика!"
    echo "========================================"
else
    echo ""
    echo "========================================"
    echo "✗ Помилка збірки!"
    echo "========================================"
    exit 1
fi
